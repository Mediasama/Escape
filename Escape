--[[
    –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ ESP + AutoFarm –º–µ–Ω—é –¥–ª—è Roblox
    - –°–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –æ–∫–Ω–∞
    - Drag'n'drop –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    - –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π GUI –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ
    - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π ESP/AutoFarm —á–µ—Ä–µ–∑ DescendantAdded/Removed –∏ CharacterAdded/Removing
    - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ ESP/Billboard
    - FPSCap
    - –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ —Å—á–µ—Ç—á–∏–∫–∞ "–°–æ–±—Ä–∞–Ω–æ"
    - –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏
    - –í—Å–µ –æ–ø—Ü–∏–∏ –∏–∑ Config –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
--]]

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local UserSettings = UserSettings()
local gameSettings = UserSettings():GetService("UserGameSettings")
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local Workspace = game:GetService("Workspace")

-- –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π GUI, –µ—Å–ª–∏ –µ—Å—Ç—å
local oldGui = PlayerGui:FindFirstChild("ESP_Farm_GUI")
if oldGui then oldGui:Destroy() end

-- –ö–æ–Ω—Ñ–∏–≥
local Config = {
    ESP = { Airbox = true, ArenaBOX = true, ArenaRogueBOX = true, Players = true },
    AutoFarm = { Airbox = true, ArenaBOX = true, ArenaRogueBOX = true, UsePrompt = true },
    BlackScreen = false,
    FPSCap = 60,
    LowGraphics = false
}

-- FPS Cap, –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ
pcall(function()
    if RunService.SetFramerateCap then
        RunService:SetFramerateCap(Config.FPSCap)
    end
end)

-- –°–æ–∑–¥–∞–Ω–∏–µ GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ESP_Farm_GUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = PlayerGui

-- –ß—ë—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω (–æ–≤–µ—Ä–ª–µ–π)
local blackFrame = Instance.new("Frame")
blackFrame.Name = "BlackOverlay"
blackFrame.BackgroundColor3 = Color3.new(0, 0, 0)
blackFrame.BackgroundTransparency = 0
blackFrame.Size = UDim2.new(1, 0, 1, 0)
blackFrame.Parent = screenGui
blackFrame.Visible = false

-- –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (draggable)
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.BorderSizePixel = 0
mainFrame.Size = UDim2.new(0, 350, 0, 400)
mainFrame.Position = UDim2.new(0, 50, 0, 50)
mainFrame.Parent = screenGui
mainFrame.Active = true
mainFrame.Draggable = true
local uiCornerMain = Instance.new("UICorner")
uiCornerMain.CornerRadius = UDim.new(0, 5)
uiCornerMain.Parent = mainFrame

-- TitleBar
local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
titleBar.BorderSizePixel = 0
titleBar.Size = UDim2.new(1, 0, 0, 30)
titleBar.Parent = mainFrame

local titleLabel = Instance.new("TextLabel")
titleLabel.Name = "TitleLabel"
titleLabel.Text = "Menu ESP –∏ AutoFarm"
titleLabel.Font = Enum.Font.SourceSansBold
titleLabel.TextSize = 18
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.BackgroundTransparency = 1
titleLabel.Size = UDim2.new(1, -60, 1, 0)
titleLabel.Position = UDim2.new(0, 5, 0, 0)
titleLabel.Parent = titleBar

local toggleButton = Instance.new("TextButton")
toggleButton.Name = "ToggleButton"
toggleButton.Text = "üîΩ"
toggleButton.Font = Enum.Font.SourceSansBold
toggleButton.TextSize = 18
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.BackgroundTransparency = 1
toggleButton.Size = UDim2.new(0, 30, 0, 30)
toggleButton.Position = UDim2.new(1, -65, 0, 0)
toggleButton.Parent = titleBar

local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Text = "‚úï"
closeButton.Font = Enum.Font.SourceSansBold
closeButton.TextSize = 18
closeButton.TextColor3 = Color3.fromRGB(255, 100, 100)
closeButton.BackgroundTransparency = 1
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Position = UDim2.new(1, -35, 0, 0)
closeButton.Parent = titleBar

-- –°–∫—Ä–æ–ª–ª-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Name = "Content"
scrollFrame.Active = true
scrollFrame.BackgroundTransparency = 1
scrollFrame.Size = UDim2.new(1, 0, 1, -50)
scrollFrame.Position = UDim2.new(0, 0, 0, 30)
scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 800)
scrollFrame.Parent = mainFrame

local listLayout = Instance.new("UIListLayout")
listLayout.Padding = UDim.new(0, 8)
listLayout.Parent = scrollFrame
listLayout.SortOrder = Enum.SortOrder.LayoutOrder

-- –°—á—ë—Ç—á–∏–∫–∏ FPS, –ø–∏–Ω–≥–∞ –∏ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
local statsFrame = Instance.new("Frame")
statsFrame.Name = "StatsFrame"
statsFrame.BackgroundTransparency = 1
statsFrame.BorderSizePixel = 0
statsFrame.Size = UDim2.new(1, 0, 0, 20)
statsFrame.Position = UDim2.new(0, 0, 1, -20)
statsFrame.Parent = mainFrame

local collectedLabel = Instance.new("TextLabel", statsFrame)
collectedLabel.Text = "–°–æ–±—Ä–∞–Ω–æ: 0"
collectedLabel.Font = Enum.Font.SourceSans
collectedLabel.TextSize = 14
collectedLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
collectedLabel.BackgroundTransparency = 1
collectedLabel.Size = UDim2.new(0.28, 0, 1, 0)
collectedLabel.Position = UDim2.new(0, 5, 0, 0)

local resetButton = Instance.new("TextButton", statsFrame)
resetButton.Text = "‚ü≥"
resetButton.Font = Enum.Font.SourceSansBold
resetButton.TextSize = 16
resetButton.TextColor3 = Color3.fromRGB(255,255,128)
resetButton.BackgroundTransparency = 1
resetButton.Size = UDim2.new(0, 22, 1, 0)
resetButton.Position = UDim2.new(0.27, 0, 0, 0)

local fpsLabel = Instance.new("TextLabel", statsFrame)
fpsLabel.Text = "FPS: 0"
fpsLabel.Font = Enum.Font.SourceSans
fpsLabel.TextSize = 14
fpsLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
fpsLabel.BackgroundTransparency = 1
fpsLabel.Size = UDim2.new(0.34, 0, 1, 0)
fpsLabel.Position = UDim2.new(0.31, 5, 0, 0)

local pingLabel = Instance.new("TextLabel", statsFrame)
pingLabel.Text = "Ping: 0 –º—Å"
pingLabel.Font = Enum.Font.SourceSans
pingLabel.TextSize = 14
pingLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
pingLabel.BackgroundTransparency = 1
pingLabel.Size = UDim2.new(0.34, 0, 1, 0)
pingLabel.Position = UDim2.new(0.65, 5, 0, 0)

-- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ–∫—Ü–∏–∏ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º
local function createSection(title)
    local sectionLabel = Instance.new("TextLabel")
    sectionLabel.Text = "  " .. title
    sectionLabel.Font = Enum.Font.SourceSansBold
    sectionLabel.TextSize = 16
    sectionLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    sectionLabel.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    sectionLabel.Size = UDim2.new(1, -10, 0, 25)
    sectionLabel.Parent = scrollFrame
    local secCorner = Instance.new("UICorner", sectionLabel)
    secCorner.CornerRadius = UDim.new(0, 5)
    sectionLabel.TextXAlignment = Enum.TextXAlignment.Left
    sectionLabel.LayoutOrder = 0
    return sectionLabel
end

-- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è (toggle)
local function createToggle(name, defaultState, onToggle)
    local container = Instance.new("Frame")
    container.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    container.Size = UDim2.new(1, -10, 0, 30)
    container.Parent = scrollFrame
    local corner = Instance.new("UICorner", container)
    corner.CornerRadius = UDim.new(0, 4)

    local label = Instance.new("TextLabel", container)
    label.Text = name
    label.Font = Enum.Font.SourceSans
    label.TextSize = 14
    label.TextColor3 = Color3.fromRGB(220, 220, 220)
    label.BackgroundTransparency = 1
    label.Position = UDim2.new(0, 5, 0, 0)
    label.Size = UDim2.new(0.6, 0, 1, 0)

    local button = Instance.new("TextButton", container)
    button.Size = UDim2.new(0, 40, 0, 20)
    button.Position = UDim2.new(1, -45, 0.5, -10)
    button.BackgroundColor3 = defaultState and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(170, 0, 0)
    button.BorderSizePixel = 0
    button.Font = Enum.Font.SourceSansBold
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Text = defaultState and "ON" or "OFF"
    local buttonCorner = Instance.new("UICorner", button)
    buttonCorner.CornerRadius = UDim.new(0, 4)

    local state = defaultState
    button.MouseButton1Click:Connect(function()
        state = not state
        button.BackgroundColor3 = state and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(170, 0, 0)
        button.Text = state and "ON" or "OFF"
        onToggle(state)
    end)
    return button, function() return state end
end

-- ESP: —Å–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥—Å–≤–µ—Ç–∫–∏
local function highlightObject(obj, color)
    if obj and obj:IsA("BasePart") then
        if obj:FindFirstChild("ESP_Highlight") then return end
        local h = Instance.new("Highlight")
        h.Name = "ESP_Highlight"
        h.FillColor = color
        h.OutlineColor = color
        h.FillTransparency = 0.5
        h.OutlineTransparency = 0
        h.Adornee = obj
        h.Parent = obj
    end
end
local function removeHighlight(obj)
    if obj and obj:FindFirstChild("ESP_Highlight") then
        obj.ESP_Highlight:Destroy()
    end
end

-- ESP: Billboard –Ω–∞–¥ –∏–≥—Ä–æ–∫–æ–º
local function createPlayerBillboard(character)
    local head = character:FindFirstChild("Head")
    if not head then return end
    if head:FindFirstChild("ESP_Billboard") then return end
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "ESP_Billboard"
    billboard.Adornee = head
    billboard.Size = UDim2.new(0, 6, 0, 6)
    billboard.StudsOffset = Vector3.new(0, 2, 0)
    billboard.AlwaysOnTop = true
    billboard.LightInfluence = 0
    billboard.Parent = head
    local frame = Instance.new("Frame", billboard)
    frame.Size = UDim2.new(1, 0, 1, 0)
    frame.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
    frame.BackgroundTransparency = 0.6
    frame.BorderSizePixel = 0
    frame.ZIndex = 1
    local corner = Instance.new("UICorner", frame)
    corner.CornerRadius = UDim.new(0, 1)
    local nameLabel = Instance.new("TextLabel", billboard)
    nameLabel.Size = UDim2.new(1, 0, 1, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = character.Name
    nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    nameLabel.Font = Enum.Font.SourceSansBold
    nameLabel.TextScaled = true
    nameLabel.ZIndex = 2
end
local function removePlayerBillboard(character)
    local head = character:FindFirstChild("Head")
    if head and head:FindFirstChild("ESP_Billboard") then
        head.ESP_Billboard:Destroy()
    end
end

-- –ö—ç—à –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è ESP/AutoFarm
local ESP_OBJECTS = {Airbox = {}, ArenaBOX = {}, ArenaRogueBOX = {}}
local function addESPObject(obj)
    if ESP_OBJECTS[obj.Name] then
        table.insert(ESP_OBJECTS[obj.Name], obj)
    end
end
local function removeESPObject(obj)
    if ESP_OBJECTS[obj.Name] then
        for i, o in ipairs(ESP_OBJECTS[obj.Name]) do
            if o == obj then table.remove(ESP_OBJECTS[obj.Name], i) break end
        end
    end
end

-- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤ ESP/AutoFarm –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏
local function processESPObject(obj)
    if not obj:IsA("BasePart") then return end
    if ESP_OBJECTS[obj.Name] then
        addESPObject(obj)
        -- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ
        if Config.ESP[obj.Name] then
            if obj.Name == "Airbox" then highlightObject(obj, Color3.fromRGB(200,0,200)) end
            if obj.Name == "ArenaBOX" then highlightObject(obj, Color3.fromRGB(255,0,0)) end
            if obj.Name == "ArenaRogueBOX" then highlightObject(obj, Color3.fromRGB(0,255,0)) end
        end
    end
end
local function cleanupESPObject(obj)
    removeHighlight(obj)
    removeESPObject(obj)
end

-- ESP: –ò–≥—Ä–æ–∫–∏ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏
local function setupPlayerESP(plr)
    local function onChar(char)
        if Config.ESP.Players then createPlayerBillboard(char) end
    end
    if plr.Character then onChar(plr.Character) end
    plr.CharacterAdded:Connect(function(char)
        if Config.ESP.Players then createPlayerBillboard(char) end
    end)
    plr.CharacterRemoving:Connect(function(char)
        removePlayerBillboard(char)
    end)
end

for _,pl in ipairs(Players:GetPlayers()) do
    setupPlayerESP(pl)
end
Players.PlayerAdded:Connect(setupPlayerESP)

-- ESP: –¥–∏–Ω–∞–º–∏–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤
for _,obj in ipairs(Workspace:GetDescendants()) do
    processESPObject(obj)
end
Workspace.DescendantAdded:Connect(processESPObject)
Workspace.DescendantRemoving:Connect(cleanupESPObject)

-- –†–∞–∑–¥–µ–ª ESP
createSection("ESP")
local espAir, getAir = createToggle("ESP Airbox (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)", true, function(state)
    Config.ESP.Airbox = state
    for _,obj in ipairs(ESP_OBJECTS["Airbox"]) do
        if state then highlightObject(obj, Color3.fromRGB(200,0,200))
        else removeHighlight(obj) end
    end
end)
local espArena, getArena = createToggle("ESP ArenaBOX (–∫—Ä–∞—Å–Ω—ã–π)", true, function(state)
    Config.ESP.ArenaBOX = state
    for _,obj in ipairs(ESP_OBJECTS["ArenaBOX"]) do
        if state then highlightObject(obj, Color3.fromRGB(255,0,0))
        else removeHighlight(obj) end
    end
end)
local espArenaRogue, getArenaRogue = createToggle("ESP ArenaRogueBOX (–∑–µ–ª–µ–Ω—ã–π)", true, function(state)
    Config.ESP.ArenaRogueBOX = state
    for _,obj in ipairs(ESP_OBJECTS["ArenaRogueBOX"]) do
        if state then highlightObject(obj, Color3.fromRGB(0,255,0))
        else removeHighlight(obj) end
    end
end)
local espPlayersToggle, getESPPlayers = createToggle("ESP –ò–≥—Ä–æ–∫–∏ (—Å–∏–Ω–∏–π)", true, function(state)
    Config.ESP.Players = state
    for _,pl in ipairs(Players:GetPlayers()) do
        if pl.Character then
            if state then createPlayerBillboard(pl.Character)
            else removePlayerBillboard(pl.Character) end
        end
    end
end)

-- –†–∞–∑–¥–µ–ª AutoFarm
createSection("AutoFarm")
local farmAirbox, getFarmAirbox = createToggle("Farm Airbox", true, function(state)
    Config.AutoFarm.Airbox = state
end)
local farmArenaBox, getFarmArenaBox = createToggle("Farm ArenaBOX", true, function(state)
    Config.AutoFarm.ArenaBOX = state
end)
local farmArenaRogueBox, getFarmArenaRogueBox = createToggle("Farm ArenaRogueBOX", true, function(state)
    Config.AutoFarm.ArenaRogueBOX = state
end)
local farmUsePrompt, getFarmUsePrompt = createToggle("Use ProximityPrompt (–∏–Ω–∞—á–µ E)", true, function(state)
    Config.AutoFarm.UsePrompt = state
end)

-- –†–∞–∑–¥–µ–ª –ù–∞—Å—Ç—Ä–æ–µ–∫ (–ß—ë—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω, –∫–∞—á–µ—Å—Ç–≤–æ –≥—Ä–∞—Ñ–∏–∫–∏, FPSCap)
createSection("–ù–∞—Å—Ç—Ä–æ–π–∫–∏")
local toggleBlack, getToggleBlack = createToggle("–ß—ë—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω", false, function(state)
    Config.BlackScreen = state
    blackFrame.Visible = state
end)
local lowGraphToggle, getLowGraph = createToggle("–ù–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –≥—Ä–∞—Ñ–∏–∫–∏", false, function(state)
    Config.LowGraphics = state
    if state then
        pcall(function() gameSettings.SavedQualityLevel = Enum.SavedQualitySetting.Level01 end)
    else
        pcall(function() gameSettings.SavedQualityLevel = Enum.SavedQualitySetting.Level10 end)
    end
end)
local fpsCapToggle, getFpsCap = createToggle("–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å FPS –¥–æ 60", true, function(state)
    Config.FPSCap = state and 60 or 240
    pcall(function()
        if RunService.SetFramerateCap then
            RunService:SetFramerateCap(Config.FPSCap)
        end
    end)
end)

-- Drag'n'drop (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ .Draggable, —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ)
do
    local dragging, dragInput, startPos, startMousePos
    local function update(input)
        local delta = input.Position - startMousePos
        mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
    titleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            startPos = mainFrame.Position
            startMousePos = input.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    titleBar.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            dragInput = input
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            update(input)
        end
    end)
end

-- –°–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –æ–∫–Ω–∞
local collapsed = false
toggleButton.MouseButton1Click:Connect(function()
    collapsed = not collapsed
    scrollFrame.Visible = not collapsed
    statsFrame.Visible = not collapsed
    mainFrame.Size = collapsed and UDim2.new(0, 350, 0, 40) or UDim2.new(0, 350, 0, 400)
    toggleButton.Text = collapsed and "‚ñ∂" or "üîΩ"
end)
closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- –ê–≤—Ç–æ—Ñ–∞—Ä–º (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
local collectedCount = 0
resetButton.MouseButton1Click:Connect(function()
    collectedCount = 0
    collectedLabel.Text = "–°–æ–±—Ä–∞–Ω–æ: 0"
end)

task.spawn(function()
    while true do
        task.wait(1)
        for name, enabled in pairs(Config.AutoFarm) do
            if name ~= "UsePrompt" and enabled then
                for _,obj in ipairs(ESP_OBJECTS[name] or {}) do
                    local prompt = obj:FindFirstChildWhichIsA("ProximityPrompt")
                    if prompt and prompt.Enabled and prompt.Parent and prompt.Parent:IsDescendantOf(Workspace) then
                        if Config.AutoFarm.UsePrompt then
                            prompt:InputHoldBegin()
                            task.wait(prompt.HoldDuration or 1)
                            prompt:InputHoldEnd()
                            collectedCount = collectedCount + 1
                        else
                            -- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —ç–º—É–ª—è—Ü–∏—è "E"), –µ—Å–ª–∏ –Ω–∞–¥–æ
                            prompt:InputHoldBegin()
                            task.wait(prompt.HoldDuration or 1)
                            prompt:InputHoldEnd()
                            collectedCount = collectedCount + 1
                        end
                    end
                end
            end
        end
    end
end)

-- FPS –∏ Ping –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
local fpsSamples, fpsSum, fpsIdx = {}, 0, 1
local lastTime = tick()
RunService.RenderStepped:Connect(function()
    -- FPS (—Å—Ä–µ–¥–Ω–µ–µ –∑–∞ 10 –∫–∞–¥—Ä–æ–≤)
    local now = tick()
    local dt = now - lastTime
    lastTime = now
    local curFPS = dt > 0 and 1/dt or 60
    fpsSamples[fpsIdx] = curFPS
    fpsSum = 0
    for _,v in ipairs(fpsSamples) do fpsSum = fpsSum + v end
    local avgFPS = math.floor(fpsSum / #fpsSamples + 0.5)
    fpsIdx = (fpsIdx % 10) + 1
    fpsLabel.Text = "FPS: " .. avgFPS

    -- Ping
    local ping = math.floor(LocalPlayer:GetNetworkPing() * 1000)
    pingLabel.Text = "Ping: " .. ping .. " –º—Å"
    collectedLabel.Text = "–°–æ–±—Ä–∞–Ω–æ: " .. collectedCount
end)
